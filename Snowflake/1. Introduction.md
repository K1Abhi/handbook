# ❄️ INTRODUCTION 
## What is a Virtual Warehouse ? 
- Think of it as our **“compute engine”—no queries can run without it**.
- Snowflake automatically creates one warehouse for new users:
  - Size: X-Small
  - State: Initially suspended
- You’ll use this default warehouse for all your query executions.

## Cost and Sizing of Warehouses

- **X-Small** is the **smallest and cheapest** option:
  - Consumes 1 credit/hour (on a running basis).
  - Costs vary based on your edition and cloud provider:
      - **Enterprise Edition on AWS:** ~$3 per credit
      - **Standard Edition:** ~$2 per credit
- **Larger warehouse sizes** follow powers of two (2, 4, 8 nodes, etc.), using more credits.

### How Snowflake Pricing Works
- Snowflake charges per credit for compute, not per second or per minute:
  - e.g., X-Small (1 node) = 1 credit/hour
- **Your bill = warehouse size × runtime (in hours) × credit cost**
- Additional features like **Time Travel** or **Multi-Cluster** are hard to price directly, so compute usage is Snowflake’s main monetization model.

## Best Practice Configuration for Cost Optimization
Always enable these two checkboxes:      
#### 1. Auto-Resume:
- When a query is triggered and the warehouse is suspended, it automatically starts.
#### 2. Auto-Suspend:
- When the warehouse is idle, it shuts down automatically.
- **Best practice:** Set auto-suspend to **1 minute**.
  - Even if we set a smaller value like 10 seconds, **Snowflake internally polls every minute**, so we will be charged for one minutes.
> If auto-suspend is not enabled, you'll keep paying even when not using the warehouse.

## ⏳ Execution Time & Cost Analysis

Let's say a query took nearly **4 minutes** to execute on the **X-Large** warehouse.
Warehouse cost is calculated based on:
  - Credit usage per hour
  - Price per credit

**💰 Cost Breakdown:**
- X-Large warehouse = **128 credits/hour**
- Enterprise Edition = **$3/credit**
- Per-minute cost per node = **$3 ÷ 60 = $0.05**
- Total per-minute cost for 128 nodes = **128 × $0.05 = $6.40**
- Cost for 4 minutes of execution = **$6.40 × 4 = $25.60**

> Total Cost of Query Execution: **~$25.60**

